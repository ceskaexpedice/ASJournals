<div class="app-page-wrapper">
	<div class="app-container">
		<fieldset class="app-p-4 app-mb-4">
			<legend>{{ 'admin.index_add_uuid' | translate }}</legend>
			<p>
				Admin rozhraní umožňuje přidávat nove ročníky nebo čísla časopisu pomoci identifikátoru UUID z Digitální knihovna AV ČR.<br />
				Identifikátor se zadává vždy včetně prefixu "uuid:". Napr: {{ state.currentMagazine.journal }}
			</p>
			<div class="app-fxLayout app-row app-center-v">
				<mat-form-field appearance="outline" class="app-fxFlex app-form-field-center-v-fix">
					<mat-label>{{ 'Zadat uuid' | translate }}</mat-label>
					<input matInput type="text" [(ngModel)]="indexUUID" name="indexUUID">
				</mat-form-field>
			</div>
			<mat-progress-bar mode="indeterminate" *ngIf="workStatus.status === 'indexing'"></mat-progress-bar>
			<div class="app-mt-4">
				<button mat-flat-button color="primary" class="app-mr-2" (click)="index()">{{ 'Přidat UUID' | translate }}</button>
				<button mat-flat-button color="primary" (click)="onDelete()" [disabled]="!indexUUID">{{ 'Smazat UUID' | translate }}</button>
			</div>
			<div *ngIf="workStatus.status !== 'none'">{{ workStatus['msg'] }}</div>
		</fieldset>

		<fieldset class="app-p-4 app-mb-4">
			<legend>{{ 'admin.index_cover' | translate }}</legend>
			<input type="file" #fileUpload ng2FileSelect [uploader]="coverUploader" style="display:none;" (change)="onFileSelected($event)">
			<div class="app-fxLayout app-row app-center-v">
				<mat-form-field appearance="outline" class="app-fxFlex app-form-field-center-v-fix">
					<input matInput type="text" name="selectedCover" [(ngModel)]="selectedCover">
					<button matPrefix mat-stroked-button color="primary" class="app-mr-2 app-ml-2" (click)="fileUpload.click()">{{ 'admin.cover' | translate }}: {{ 'Vybrat soubor' | translate }}</button>
				</mat-form-field>
			</div>
			<mat-progress-bar mode="determinate" [value]="coverUploader.progress" *ngIf="coverUploader.progress !== 0 && coverUploader.progress !== 100"></mat-progress-bar>
			<button mat-flat-button color="primary" (click)="uploadCover()" class="app-mt-4">{{ 'Nahrat' | translate }}</button>
		</fieldset>
	</div>
	<h3>Debug =></h3> {{ coverUploader.progress }}
</div>